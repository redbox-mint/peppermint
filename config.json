{
  "port": 8080,
  "token": "Vj$BE4p9*A%6LCfUyM3u1X8guXG7*j",
  "scriptSubDir": "scripts",
  "init": {
    "scripts": [
      "init/build-solr-schema.groovy"
    ]
  },
  "routes": [
    {
      "method": "POST",
      "path": "/peppermint/:recordType",
      "dataset": {
        "scripts": ["jsonld-parse.groovy", "commit-to-solr.groovy"]
       }
    }
  ],
  "recordType": {
    "dataset": {
      "core": "dataset",
      "format": "jsonld",
      "recordTypeName": "dataset",
      "rootNodeFieldContextId": "path",
      "rootNodeFieldValues": ["data/", "./"],
      "types": {
        "rootNode": [
          "scripts/jsonld-parse/addRootDataset.groovy"
        ],
        "https://schema.org/Person": [
          "scripts/jsonld-parse/addPerson.groovy"
        ],
        "http://schema.org/GeoCoordinates": [
          "scripts/jsonld-parse/addFlattenedChild.groovy",
          "scripts/jsonld-parse/geojson.groovy"
        ]
      },
      "defaultHandlerScript": "scripts/jsonld-parse/addFlattenedChild.groovy",
      "facets": {
        "https://schema.org/keywords": {
          "trim": true,
          "field_suffix": "_facet_multi",
          "tokenize": {
            "delim": ","
          }
        },
        "https://schema.org/publisher": {
          "trim": true,
          "fieldName": "@id"
        }
      }
    },
    "person": {
      "core": "dataset",
      "format": "jsonld",
      "recordTypeName": "person",
      "defaultHandlerScript": "scripts/jsonld-parse/addFlattenedChild.groovy",
      "facets": {
        "https://schema.org/birthPlace": {
          "trim": true
        }
      }
    }
  },
  "solr": {
    "baseUrl": "http://$SOLR_HOST:$SOLR_PORT",
    "cores": ["dataset"],
    "rebuildSchemaAlways": true,
    "schema": {
        "dataset": {
          "add-field": [
            {
              "name": "name",
              "type": "text_general",
              "stored": true
            },
            {
              "name": "type",
              "type": "text_general",
              "stored": true,
              "multiValued": true
            },
            {
              "name": "main_search",
              "type": "text_en",
              "stored": true,
              "multiValued": true
            }
          ],
          "add-dynamic-field": [
            {
              "name": "*_name",
              "type": "text_en",
              "stored": true
            },
            {
              "name": "*_description",
              "type": "text_en",
              "stored": true
            },
            {
              "name": "*_birthDate",
              "type": "text_en",
              "stored": true
            },
            {
              "name": "*_facet_multi",
              "type": "strings",
              "stored": true,
            },
            {
              "name": "*_facet",
              "type": "string",
              "stored": true
            }
          ],
          "add-copy-field": [
            {
              "source": "https___schema_org_name",
              "dest": ["main_search"]
            },
            {
              "source": "https___schema_org_description",
              "dest": ["main_search"]
            }
          ]
        }
    }
  }
}
